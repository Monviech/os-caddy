<div style="background-color: white; padding: 10px; border: 1px solid #ddd;">
    <div class="content">
        <h1>Caddy General Settings</h1>
        <!-- Ensure the form has the same ID as referenced in your JavaScript -->
        {{ partial("layout_partials/base_form", ['fields': generalForm, 'action': '/ui/caddy/general', 'id': 'frm_GeneralSettings']) }}
    </div>
</div>

<div style="margin-top: 20px; width: 100%; background-color: white; padding: 5px; border: 1px solid #ddd;">
    <button id="saveAct" class="btn btn-primary" type="button"><b>Save</b></button>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        var data_get_map = {'frm_GeneralSettings': "/api/caddy/settings/get"};
        mapDataToFormUI(data_get_map).done(function(data){
            // actions to run after load, if necessary
        });

        // Link save button to API set action
        $("#saveAct").click(function(){
            saveFormToEndpoint(url="/api/caddy/settings/set", formid='frm_GeneralSettings', callback_ok=function(){
                // action to run after successful save, e.g., reconfigure service
                location.reload(); // This will reload the page after a successful save
            });
        });
    });
</script>

